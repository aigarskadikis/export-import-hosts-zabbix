<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2023-06-28T06:37:12Z</date><groups><group><name>Templates/Linux</name></group></groups><templates><template><template>simpleL</template><name>simpleL</name><groups><group><name>Templates/Linux</name></group></groups><items><item><name>uptime</name><type>INTERNAL</type><key>zabbix[uptime]</key></item></items></template></templates></zabbix_export>
<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2023-06-28T06:40:14Z</date><groups><group><name>Templates/Databases</name></group></groups><templates><template><template>template_oracle_odbc</template><name>Template Oracle ODBC</name><description>Template Oracle ODBC</description><groups><group><name>Templates/Databases</name></group></groups><applications><application><name>Oracle</name></application><application><name>Oracle Connections</name></application><application><name>Oracle Performance</name></application><application><name>Oracle Size</name></application><application><name>Oracle Text</name></application><application><name>rac-off</name></application></applications><items><item><name>Archivelog</name><type>ODBC</type><key>db.odbc.select[ora_archive, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>5m</delay><value_type>FLOAT</value_type><units>B</units><params>select nvl(sum(BLOCKS*BLOCK_SIZE),0) from v$archived_log where COMPLETION_TIME &gt;= (sysdate - 5 / 60 / 24);</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;5G</expression><name>Archivelog</name><priority>WARNING</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Archivelog Dest Status</name><type>ODBC</type><key>db.odbc.select[ora_archive_dest_st, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><trends>0</trends><value_type>TEXT</value_type><params>SELECT 'InstID:['||inst_id||'DestID:['||dest_id||'], Status:['||status||'], Error:['||error||'].' FROM gv$archive_dest WHERE destination is NOT NULL and status != 'VALID' union select 'ok' from dual ORDER BY 1</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(ok)}=0</expression><name>Archivelog Destinations</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>ASM diskstate</name><type>ODBC</type><key>db.odbc.select[ora_asm_diskstate, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>5m</delay><trends>0</trends><value_type>FLOAT</value_type><params>select count(*) from v$asm_disk where state not in ('NORMAL','ADDING','UNKNOWN');</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Bad ASM disk state</name><priority>DISASTER</priority><description>ASM disk state not in ('NORMAL','ADDING','UNKNOWN'), check ASM disks!</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Backup Full days ago</name><type>ODBC</type><key>db.odbc.select[ora_backup0ago, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><value_type>FLOAT</value_type><units>day</units><params>select nvl(round(sysdate-max(completion_time),1),-1) DAYS_AGO from gv$backup_set where incremental_level=0</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;8</expression><name>Backup FULL (Days)</name><priority>HIGH</priority><description>Last full backup too old</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Backup incr days ago</name><type>ODBC</type><key>db.odbc.select[ora_backup1ago, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><value_type>FLOAT</value_type><units>day</units><params>select nvl(round(sysdate-max(completion_time),1),-1) DAYS_AGO from gv$backup_set where incremental_level=1</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;3</expression><name>Backup INCR (Days)</name><priority>HIGH</priority><description>Last incremental backup too old</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Corrupted blocks</name><type>ODBC</type><key>db.odbc.select[ora_corruptblocks, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) from gv$database_block_corruption</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Corrupted blocks found</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>DB ArchivelogsSize</name><type>ODBC</type><key>db.odbc.select[ora_dbarchlogsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><units>B</units><params>select nvl(to_char(sum(block_size*blocks),999999999999999),0) bytes from v$archived_log where status='A'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Size</name></application></applications></item><item><name>DB Block Gets</name><type>ODBC</type><key>db.odbc.select[ora_dbblockgets, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>select to_char(sum(decode(name,'db block gets', value,0))) &quot;block_gets&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>DB Consistent Gets</name><type>ODBC</type><key>db.odbc.select[ora_dbconsistentgets, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>select to_char(sum(decode(name,'consistent gets', value,0))) &quot;consistent_gets&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>DB Data Size</name><type>ODBC</type><key>db.odbc.select[ora_dbdatasize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><units>B</units><params>select to_char(sum(bytes),999999999999999) bytes from dba_segments</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Size</name></application></applications></item><item><name>DB Hit Ratio</name><type>ODBC</type><key>db.odbc.select[ora_dbhitratio, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><params>select ( sum(decode(name,'consistent gets', value,0)) + sum(decode(name,'db block gets', value,0)) - sum(decode(name,'physical reads', value,0))) / (sum(decode(name,'consistent gets', value,0)) + sum(decode(name,'db block gets', value,0)) ) * 100 &quot;hit_ratio&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>DB Log Mode</name><type>ODBC</type><key>db.odbc.select[ora_dblogmode, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>1h</delay><trends>0</trends><value_type>TEXT</value_type><params>select log_mode from gv$database</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{diff(0)}=1</expression><name>DB log mode changed to  {ITEM.VALUE1}</name><priority>INFO</priority><tags><tag><tag>Who</tag><value>DBAdminn</value></tag></tags></trigger></triggers></item><item><name>DB Physical Reads</name><type>ODBC</type><key>db.odbc.select[ora_dbphysicalread, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>blk/min</units><params>select sum(decode(name,'physical reads', value,0)) &quot;phys_reads&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>DB Platform</name><type>ODBC</type><key>db.odbc.select[ora_dbplatform, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>1h</delay><trends>0</trends><value_type>TEXT</value_type><params>select platform_name from gv$database</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing></item><item><name>DB DataFilesSize</name><type>ODBC</type><key>db.odbc.select[ora_dbsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><units>B</units><params>SELECT SUM(NVL(bytes,0)) val FROM dba_data_files</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Size</name></application></applications></item><item><name>DB Version</name><type>ODBC</type><key>db.odbc.select[ora_dbversion, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>1h</delay><trends>0</trends><value_type>TEXT</value_type><params>select * from v$version where banner like '%Database%'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing></item><item><name>Hit ratio - BODY</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace ='BODY'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Hit ratio - SQLAREA</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace ='SQL AREA'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Hit ratio - TABLE/PROCEDURE</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_table_proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace = 'TABLE/PROCEDURE'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Hit ratio - TRIGGER</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace ='TRIGGER'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Index Unusable</name><type>ODBC</type><key>db.odbc.select[ora_index_unusable, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><params>select count(*) from ( select 1 from  DBA_INDEXES           where  status='UNUSABLE' union all &#13;
   select 1 from  DBA_IND_PARTITIONS    where  status='UNUSABLE' union all &#13;
   select 1 from  DBA_IND_SUBPARTITIONS where  status='UNUSABLE')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Index unusable found</name><priority>AVERAGE</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Invalid objects count</name><type>ODBC</type><key>db.odbc.select[ora_invalidobj, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><params>select count(*) from dba_objects where status='INVALID'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Job failure</name><type>ODBC</type><key>db.odbc.select[ora_jobfail, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><value_type>TEXT</value_type><params>select '['||schema_user||', B:'||broken||', F:'||failures||']' as status from dba_jobs where failures&gt;0 union select 'none' from dual</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none)}=0</expression><name>Job Fail: {ITEM.VALUE1}</name><priority>WARNING</priority><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmini</value></tag></tags></trigger></triggers></item><item><name>Job queue proceses</name><type>ODBC</type><key>db.odbc.select[ora_jobqporc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><params>select value from gv$parameter where name='job_queue_processes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Job stopped</name><type>ODBC</type><key>db.odbc.select[ora_jobstopped, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><value_type>TEXT</value_type><params>select '['||schema_user||', B:'||broken||', F:'||failures||']' as status from dba_jobs where broken='Y' and failures=0 union select 'none' from dual</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none)}=0</expression><name>Job Stopped: {ITEM.VALUE1}</name><priority>INFO</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>L I/O Block Change</name><type>ODBC</type><key>db.odbc.select[ora_lio_block_changes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>SELECT to_char(SUM(DECODE(NAME,'db block changes',VALUE,0))) FROM GV$SYSSTAT WHERE NAME ='db block changes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>L I/O Consinstent Read</name><type>ODBC</type><key>db.odbc.select[ora_lio_consistent_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><units>block/min</units><params>SELECT to_char(sum(decode(name,'consistent gets',value,0))) FROM GV$SYSSTAT WHERE NAME ='consistent gets'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>L I/O Current Read</name><type>ODBC</type><key>db.odbc.select[ora_lio_current_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>SELECT to_char(sum(decode(name,'db block gets',value,0))) FROM GV$SYSSTAT WHERE NAME ='db block gets'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Locks5</name><type>ODBC</type><key>db.odbc.select[ora_locks5, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><trends>0</trends><value_type>TEXT</value_type><params>SELECT LISTAGG(lock1, CHR(10)) WITHIN GROUP (order by rownum asc)from&#13;
(select CHR(10)||'This DB User '||gvs.USERNAME||' OS: '||gvs.OSUSER||'/'||gvs.MACHINE||' (sid:'||gvh.sid||', serial:'||gvs.serial#||', inst_id: '||gvh.inst_id||', Status: '||gvs.status||', Module: '||gvs.module||')'||CHR(10)||&#13;
'Running sql: '||CHR(10)||&#13;
NVL(sq.sql_text,'INACTIVE')||CHR(10)||&#13;
'Kill command: alter system kill session '|| '''' || gvh.sid || ',' || gvs.serial# || ',@'||gvh.inst_id ||''';'||CHR(10)||&#13;
'Blocks DB User '||gvs2.USERNAME||' OS: '||gvs2.OSUSER||'/'||gvs2.MACHINE||' (sid:'||gvw.sid||', serial:'||gvs2.serial#||', inst_id: '||gvw.inst_id||', Status: '||gvs2.status||', Module: '||gvs2.module||')'||'for '||gvs2.seconds_in_wait||'s '||CHR(10)||&#13;
'Running sql: '||sq2.sql_text as lock1&#13;
FROM gv$lock gvh, gv$lock gvw, gv$session gvs, gv$sql sq, gv$session gvs2, gv$sql sq2&#13;
WHERE (gvh.id1, gvh.id2) in (&#13;
           SELECT id1, id2 FROM gv$lock WHERE request=0&#13;
                INTERSECT&#13;
           SELECT id1, id2 FROM gv$lock WHERE lmode=0)&#13;
  AND gvh.id1=gvw.id1&#13;
  AND gvh.id2=gvw.id2&#13;
  AND gvh.request=0&#13;
  AND gvw.lmode=0&#13;
  AND gvh.sid=gvs.sid&#13;
  AND gvh.inst_id=gvs.inst_id&#13;
  AND gvs.sql_id = sq.sql_id(+)&#13;
  AND gvw.sid=gvs2.sid&#13;
  AND gvw.inst_id=gvs2.inst_id&#13;
  AND gvs2.sql_id = sq2.sql_id&#13;
  and gvs2.seconds_in_wait &gt; 180&#13;
  order by gvs2.seconds_in_wait desc)&#13;
      union select 'none' from dual;</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none,#3)}=0</expression><name>Locks</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Max Processes</name><type>ODBC</type><key>db.odbc.select[ora_maxprocs, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>select value &quot;maxprocs&quot; from gv$parameter where name ='processes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Max Sessions</name><type>ODBC</type><key>db.odbc.select[ora_maxsession, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>select value &quot;maxsess&quot; from gv$parameter where name ='sessions'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Miss Latch</name><type>ODBC</type><key>db.odbc.select[ora_miss_latch, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><params>SELECT SUM(misses) FROM GV$LATCH</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>PGA</name><type>ODBC</type><key>db.odbc.select[ora_pga, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>select  value from GV$PGASTAT where name in 'total PGA inuse'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>PGA Aggregate target</name><type>ODBC</type><key>db.odbc.select[ora_pga_aggregate_target, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>select  value from GV$PGASTAT where name in 'aggregate PGA target parameter'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Phys i/o Datafile Reads</name><type>ODBC</type><key>db.odbc.select[ora_phio_datafile_reads, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>io/sec</units><params>select to_char(sum(decode(name,'physical reads direct',value,0))) FROM GV$SYSSTAT where name ='physical reads direct'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Phys i/o Datafile Writes</name><type>ODBC</type><key>db.odbc.select[ora_phio_datafile_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>io/sec</units><params>select to_char(sum(decode(name,'physical writes direct',value,0))) FROM GV$SYSSTAT where name ='physical writes direct'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Phys i/o Redo Writes</name><type>ODBC</type><key>db.odbc.select[ora_phio_redo_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>io/sec</units><params>select to_char(sum(decode(name,'redo writes',value,0))) FROM GV$SYSSTAT where name ='redo writes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Pin hit ratio - BODY</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='BODY'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pin hit ratio - SQLAREA</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='SQL AREA'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pin hit ratio - TABLE-PROCEDURE</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_table-proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='TABLE/PROCEDURE'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pin hit ratio - TRIGGER</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='TRIGGER'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool dict cache</name><type>ODBC</type><key>db.odbc.select[ora_pool_dict_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'dictionary cache',(bytes),0),0)),2)) pool_dict_cache FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool free mem</name><type>ODBC</type><key>db.odbc.select[ora_pool_free_mem, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'free memory',(bytes),0),0)),2)) pool_free_mem FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool lib cache</name><type>ODBC</type><key>db.odbc.select[ora_pool_lib_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'library cache',(bytes),0),0)),2)) pool_lib_cache FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool misc</name><type>ODBC</type><key>db.odbc.select[ora_pool_misc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'library cache',0,'dictionary cache',0,'free memory',0,'sql area', 0,(bytes)),0)),2)) pool_misc FROM V$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool sql area</name><type>ODBC</type><key>db.odbc.select[ora_pool_sql_area, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'sql area',(bytes),0),0)),2)) pool_sql_area FROM V$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Processes</name><type>ODBC</type><key>db.odbc.select[ora_procnum, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) &quot;procnum&quot; from gv$process</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Redo switches per 5min</name><type>ODBC</type><key>db.odbc.select[ora_redo_5min, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*)  from gv$log_history where thread#=(select thread# from gv$instance) and first_time between sysdate-5/24/60 and sysdate</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application><application><name>rac-off</name></application></applications></item><item><name>Redo switches per hour</name><type>ODBC</type><key>db.odbc.select[ora_redo_hr, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><params>select count(*)  from gv$log_history where thread#=(select thread# from gv$instance) and first_time between sysdate-1/24 and sysdate</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application><application><name>rac-off</name></application></applications></item><item><name>Resumable sessions</name><type>ODBC</type><key>db.odbc.select[ora_resumable_ses, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><params>select count(*) from dba_resumable where suspend_time is not null and (resume_time is  null or resume_time&lt;suspend_time);</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Resumable sessions found</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Sessions</name><type>ODBC</type><key>db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) from gv$session</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Session Active</name><type>ODBC</type><key>db.odbc.select[ora_session_active, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) from gv$session where WAIT_CLASS&lt;&gt;'Idle'  and type &lt;&gt; 'BACKGROUND';</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications><triggers><trigger><expression>{avg(5m)}&gt;15</expression><name>Active Session &gt;15</name><priority>WARNING</priority><description>WARNING, average value for 5min!</description><dependencies><dependency><name>Active Session &gt;30</name><expression>{template_oracle_odbc:db.odbc.select[ora_session_active, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].avg(5m)}&gt;30</expression></dependency></dependencies><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>{avg(5m)}&gt;30</expression><name>Active Session &gt;30</name><priority>HIGH</priority><description>DANGER, average value for 5min!</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Session Inactive</name><type>ODBC</type><key>db.odbc.select[ora_session_inactive, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select SUM(Decode(Type, 'BACKGROUND', 0, Decode(Status, 'ACTIVE', 0, 1))) FROM GV$SESSION</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Session System</name><type>ODBC</type><key>db.odbc.select[ora_session_system, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select SUM(Decode(Type, 'BACKGROUND', 1, 0)) system_sessions FROM GV$SESSION</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>SGA buffer cache</name><type>ODBC</type><key>db.odbc.select[ora_sga_buffer_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT to_char(ROUND(SUM(decode(pool,NULL,decode(name,'db_block_buffers',(bytes),'buffer_cache',(bytes),0),0)),2)) sga_bufcache FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA fixed</name><type>ODBC</type><key>db.odbc.select[ora_sga_fixed, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,NULL,decode(name,'fixed_sga',(bytes),0),0)),2)) sga_fixed FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA java pool</name><type>ODBC</type><key>db.odbc.select[ora_sga_java_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT to_char(ROUND(SUM(decode(pool,'java pool',(bytes),0)),2)) sga_jpool FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA large pool</name><type>ODBC</type><key>db.odbc.select[ora_sga_large_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT to_char(ROUND(SUM(decode(pool,'large pool',(bytes),0)),2)) sga_lpool FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA log buffer</name><type>ODBC</type><key>db.odbc.select[ora_sga_log_buffer, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,NULL,decode(name,'log_buffer',(bytes),0),0)),2)) sga_lbuffer FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA shared pool</name><type>ODBC</type><key>db.odbc.select[ora_sga_shared_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'library cache',0,'dictionary cache',0,'free memory',0,'sql area',0,(bytes)),0)),2)) pool_misc FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Sql Query Not Indexed</name><type>ODBC</type><key>db.odbc.select[ora_sqlnotindexed, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><params>SELECT SUM(DECODE(NAME, 'table scans (long tables)', VALUE, 0))/ (SUM(DECODE(NAME, 'table scans (long tables)', VALUE, 0))+SUM(DECODE(NAME, 'table scans (short tables)', VALUE, 0)))*100 SQL_NOT_INDEXED FROM GV$SYSSTAT WHERE 1=1 AND ( NAME IN ('table scans (long tables)','table scans (short tables)') )</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Uptime</name><type>ODBC</type><key>db.odbc.select[ora_uptime, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>uptime</units><params>select to_char((sysdate-startup_time)*86400, 'FM99999999999999990') retvalue from gv$instance</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{nodata(15m)}=1</expression><name>DB Alive</name><priority>AVERAGE</priority><description>Zabbix NOT received data from DB over 6 min. (3 times try) Check TNS, DB, ODBC conn. from zabbix.</description><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>{last()}&lt;20m</expression><name>Uptime</name><priority>WARNING</priority><description>Uptime less 20 min. - DB  just (re)started</description><tags><tag><tag>Who</tag><value>DBAdminn</value></tag></tags></trigger></triggers></item><item><name>Users Connected</name><type>ODBC</type><key>db.odbc.select[ora_userconn, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><params>select count(username) from gv$session where username is not null</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Users Locked</name><type>ODBC</type><key>db.odbc.select[ora_users_locked, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><trends>0</trends><value_type>TEXT</value_type><params>SELECT username || ' ' || lock_date || ' ' || account_status as res&#13;
  FROM dba_users&#13;
 where ACCOUNT_STATUS like 'EXPIRED(GRACE)'&#13;
    or ACCOUNT_STATUS like 'LOCKED(TIMED)'&#13;
union&#13;
select 'none' from dual</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none)}=0</expression><name>User Locked : {ITEM.VALUE1}</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Waits Controlfile I/O</name><type>ODBC</type><key>db.odbc.select[ora_waits_controfileio, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'control file sequential read', total_waits, 'control file single write', total_waits, 'control file parallel write',total_waits,0))) ControlFileIO FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client','pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits direct path read</name><type>ODBC</type><key>db.odbc.select[ora_waits_directpath_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'direct path read',total_waits,0))) DirectPathRead FROM GV$system_event WHERE 1=1 AND event not in (   'SQL*Net message from ', 'SQL*Net more data from client','pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits File I/O</name><type>ODBC</type><key>db.odbc.select[ora_waits_file_io, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'file identify',total_waits, 'file open',total_waits,0))) FileIO FROM GV$system_event WHERE 1=1 AND event not in (   'SQL*Net message from client',   'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits Latch</name><type>ODBC</type><key>db.odbc.select[ora_waits_latch, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'control file sequential read', total_waits, 'control file single write', total_waits, 'control file parallel write',total_waits,0))) ControlFileIO FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits Logwrite</name><type>ODBC</type><key>db.odbc.select[ora_waits_logwrite, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'log file single write',total_waits, 'log file parallel write',total_waits,0))) LogWrite FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits multiblock read</name><type>ODBC</type><key>db.odbc.select[ora_waits_multiblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'db file scattered read',total_waits,0))) MultiBlockRead FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits others</name><type>ODBC</type><key>db.odbc.select[ora_waits_other, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'control file sequential read',0,'control file single write',0,'control file parallel write',0,'db file sequential read',0,'db file scattered read',0,'direct path read',0,'file identify',0,'file open',0,'SQL*Net message to client',0,'SQL*Net message to dblink',0, 'SQL*Net more data to client',0,'SQL*Net more data to dblink',0, 'SQL*Net break/reset to client',0,'SQL*Net break/reset to dblink',0, 'log file single write',0,'log file parallel write',0,total_waits))) Other FROM GV$system_event WHERE 1=1 AND event not in (  'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message',  'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits single block read</name><type>ODBC</type><key>db.odbc.select[ora_waits_singleblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'db file sequential read',total_waits,0))) SingleBlockRead FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits SQLNet</name><type>ODBC</type><key>db.odbc.select[ora_waits_sqlnet, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'SQL*Net message to client',total_waits,'SQL*Net message to dblink',total_waits,'SQL*Net more data to client',total_waits,'SQL*Net more data to dblink',total_waits,'SQL*Net break/reset to client',total_waits,'SQL*Net break/reset to dblink',total_waits,0))) SQLNET FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client','SQL*Net more data from client','pmon timer','rdbms ipc message','rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Closed wallets</name><type>ODBC</type><key>db.odbc.select[ora_wallets.closed.cnt, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><params>select count(t.encrypted||w.status) CLOSED_WALLET from V$ENCRYPTION_WALLET w, dba_tablespaces t where t.encrypted='YES' and w.status!='OPEN'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Wallet is closed</name><priority>HIGH</priority><description>Closed status for wallet found</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item></items><discovery_rules><discovery_rule><name>ASMD</name><type>ODBC</type><key>db.odbc.discovery[ora_asmd,{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>SELECT name AS ASMD FROM v$asm_diskgroup</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><lifetime>1d</lifetime><item_prototypes><item_prototype><name>ASM Free size of {#ASMD}</name><type>ODBC</type><key>db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT free_mb*1024*1024 AS freebytes FROM v$asm_diskgroup &#13;
WHERE name= '{#ASMD}'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>ASM</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>ASM Total size of {#ASMD}</name><type>ODBC</type><key>db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT total_mb*1024*1024 AS maxbytes FROM v$asm_diskgroup &#13;
WHERE name= '{#ASMD}'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>ASM</name></application_prototype></application_prototypes></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;5</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;7</recovery_expression><name>Free ASM Space less 5% for {#ASMD}</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype><trigger_prototype><expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;20</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;21</recovery_expression><name>Free ASM Space less 20% for {#ASMD}</name><priority>HIGH</priority><description>Warning escalate to disaster if free &lt; 5%. Warning off if free &gt; 24%</description><dependencies><dependency><name>Free ASM Space less 5% for {#ASMD}</name><expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;5</expression><recovery_expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;7</recovery_expression></dependency></dependencies><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype></trigger_prototypes></discovery_rule><discovery_rule><name>TBSPC</name><type>ODBC</type><key>db.odbc.discovery[ora_tablespacenames,{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>SELECT tablespace_name AS TBSPC FROM dba_tablespaces</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><lifetime>1d</lifetime><item_prototypes><item_prototype><name>tablespace {#TBSPC} maxsize</name><type>ODBC</type><key>db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT SUM(NVL((CASE maxbytes WHEN 0 THEN bytes ELSE maxbytes END),0)) AS maxbytes&#13;
FROM dba_data_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name&#13;
UNION ALL&#13;
SELECT SUM(NVL((CASE maxbytes WHEN 0 THEN bytes ELSE maxbytes END),0)) AS maxbytes&#13;
FROM dba_temp_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>tablespace {#TBSPC} size</name><type>ODBC</type><key>db.odbc.select[ora_tablespace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT SUM(NVL(bytes,0)) AS bytes&#13;
FROM dba_data_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name&#13;
UNION ALL&#13;
SELECT SUM(NVL(bytes,0)) AS bytes&#13;
FROM dba_temp_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>tablespace {#TBSPC} used %</name><type>ODBC</type><key>db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>SELECT round(used_percent,2) FROM dba_tablespace_usage_metrics WHERE tablespace_name = '{#TBSPC}'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>tablespace {#TBSPC} used</name><type>ODBC</type><key>db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT used_space * (SELECT block_size FROM dba_tablespaces WHERE tablespace_name=um.tablespace_name) FROM dba_tablespace_usage_metrics UM  WHERE tablespace_name =  '{#TBSPC}';</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&gt;85 and&#13;
({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;999G</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&lt;80 and&#13;
({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;9M</recovery_expression><name>Tablespace {#TBSPC} used over 85%</name><priority>HIGH</priority><manual_close>YES</manual_close><dependencies><dependency><name>Tablespace {#TBSPC} used over 98%</name><expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&gt;98 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;999G</expression><recovery_expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&lt;96 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;9M</recovery_expression></dependency></dependencies><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype><trigger_prototype><expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&gt;98 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;999G</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&lt;96 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;9M</recovery_expression><name>Tablespace {#TBSPC} used over 98%</name><priority>DISASTER</priority><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><name>size of {#TBSPC}</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>AA0000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>008800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_tablespace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$DSN}</macro></macro><macro><macro>{$ORACLE.CONN.STR}</macro><value>Driver=/usr/lib/oracle/19.15/client64/lib/libsqora.so.19.1;DBQ=//10.133.253.44:49161/XE;UID=system;PWD=oracle;</value></macro><macro><macro>{$ORACLE.PASSWORD}</macro><value>oracle</value></macro><macro><macro>{$ORACLE.USER}</macro><value>system</value></macro><macro><macro>{$ORA_PASS}</macro><value>oracle</value></macro><macro><macro>{$ORA_USER}</macro><value>system</value></macro><macro><macro>{$RANK}</macro><value>Prod</value></macro></macros></template></templates><triggers><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_pga, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_pga_aggregate_target, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;90</expression><name>PGA Alarm</name><status>DISABLED</status><priority>INFO</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_procnum, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_maxprocs, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;80</expression><name>Process Alarm</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_maxsession, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;80</expression><name>Session Alarm over 80% of max</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_maxsession, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;98</expression><name>Session Alarm over 98% of max</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers><graphs><graph><name>DB ArchivelogsSize</name><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>6666FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_dbarchlogsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>DB Size</name><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>FILLED_REGION</drawtype><color>6666FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_dbsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>FILLED_REGION</drawtype><color>00C800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_dbdatasize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Events Waits</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>CCFFCC</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_latch, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>CCCCFF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_file_io, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>FF3333</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_other, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>FF33FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_singleblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>FFFF33</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_multiblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>5</sortorder><color>009900</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_directpath_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>6</sortorder><color>888888</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_sqlnet, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>7</sortorder><color>00BBBB</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_controfileio, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>8</sortorder><color>FFCCCC</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_logwrite, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Hit Ratio</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><color>009900</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_table_proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>FFFF33</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>FFCCFF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Logical I/O</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_lio_consistent_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>00EEEE</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_lio_block_changes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>FF9999</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_lio_current_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>PGA</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>00CC00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pga, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>000000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pga_aggregate_target, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Physical I/O</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_phio_redo_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>33FFFF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_phio_datafile_reads, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>GRADIENT_LINE</drawtype><color>FF9999</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_phio_datafile_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Pin Hit Ratio</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><color>0000CC</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_table-proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>CCCC00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>C800C8</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>00DD00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Session/Process</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>0000DD</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>00CC00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_procnum, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Sessions</name><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session_inactive, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>FF33FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session_system, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>GRADIENT_LINE</drawtype><color>00BB00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session_active, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>SGA Memory Usage</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>00BB00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_buffer_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>EE0000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_fixed, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>00DDDD</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_java_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>FF66FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_large_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>C8C800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_log_buffer, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>5</sortorder><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_shared_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Shared Pool</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>00C800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_dict_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>C80000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_free_mem, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>008888</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_lib_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>C800C8</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_misc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>EEEE00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_sql_area, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2023-06-28T06:41:03Z</date><groups><group><name>Templates/Databases</name></group></groups><templates><template><template>template_oracle_odbc</template><name>Template Oracle ODBC</name><description>Template Oracle ODBC</description><groups><group><name>Templates/Databases</name></group></groups><applications><application><name>Oracle</name></application><application><name>Oracle Connections</name></application><application><name>Oracle Performance</name></application><application><name>Oracle Size</name></application><application><name>Oracle Text</name></application><application><name>rac-off</name></application></applications><items><item><name>Archivelog</name><type>ODBC</type><key>db.odbc.select[ora_archive, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>5m</delay><value_type>FLOAT</value_type><units>B</units><params>select nvl(sum(BLOCKS*BLOCK_SIZE),0) from v$archived_log where COMPLETION_TIME &gt;= (sysdate - 5 / 60 / 24);</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;5G</expression><name>Archivelog</name><priority>WARNING</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Archivelog Dest Status</name><type>ODBC</type><key>db.odbc.select[ora_archive_dest_st, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><trends>0</trends><value_type>TEXT</value_type><params>SELECT 'InstID:['||inst_id||'DestID:['||dest_id||'], Status:['||status||'], Error:['||error||'].' FROM gv$archive_dest WHERE destination is NOT NULL and status != 'VALID' union select 'ok' from dual ORDER BY 1</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(ok)}=0</expression><name>Archivelog Destinations</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>ASM diskstate</name><type>ODBC</type><key>db.odbc.select[ora_asm_diskstate, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>5m</delay><trends>0</trends><value_type>FLOAT</value_type><params>select count(*) from v$asm_disk where state not in ('NORMAL','ADDING','UNKNOWN');</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Bad ASM disk state</name><priority>DISASTER</priority><description>ASM disk state not in ('NORMAL','ADDING','UNKNOWN'), check ASM disks!</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Backup Full days ago</name><type>ODBC</type><key>db.odbc.select[ora_backup0ago, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><value_type>FLOAT</value_type><units>day</units><params>select nvl(round(sysdate-max(completion_time),1),-1) DAYS_AGO from gv$backup_set where incremental_level=0</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;8</expression><name>Backup FULL (Days)</name><priority>HIGH</priority><description>Last full backup too old</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Backup incr days ago</name><type>ODBC</type><key>db.odbc.select[ora_backup1ago, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><value_type>FLOAT</value_type><units>day</units><params>select nvl(round(sysdate-max(completion_time),1),-1) DAYS_AGO from gv$backup_set where incremental_level=1</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;3</expression><name>Backup INCR (Days)</name><priority>HIGH</priority><description>Last incremental backup too old</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Corrupted blocks</name><type>ODBC</type><key>db.odbc.select[ora_corruptblocks, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) from gv$database_block_corruption</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Corrupted blocks found</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>DB ArchivelogsSize</name><type>ODBC</type><key>db.odbc.select[ora_dbarchlogsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><units>B</units><params>select nvl(to_char(sum(block_size*blocks),999999999999999),0) bytes from v$archived_log where status='A'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Size</name></application></applications></item><item><name>DB Block Gets</name><type>ODBC</type><key>db.odbc.select[ora_dbblockgets, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>select to_char(sum(decode(name,'db block gets', value,0))) &quot;block_gets&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>DB Consistent Gets</name><type>ODBC</type><key>db.odbc.select[ora_dbconsistentgets, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>select to_char(sum(decode(name,'consistent gets', value,0))) &quot;consistent_gets&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>DB Data Size</name><type>ODBC</type><key>db.odbc.select[ora_dbdatasize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><units>B</units><params>select to_char(sum(bytes),999999999999999) bytes from dba_segments</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Size</name></application></applications></item><item><name>DB Hit Ratio</name><type>ODBC</type><key>db.odbc.select[ora_dbhitratio, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><params>select ( sum(decode(name,'consistent gets', value,0)) + sum(decode(name,'db block gets', value,0)) - sum(decode(name,'physical reads', value,0))) / (sum(decode(name,'consistent gets', value,0)) + sum(decode(name,'db block gets', value,0)) ) * 100 &quot;hit_ratio&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>DB Log Mode</name><type>ODBC</type><key>db.odbc.select[ora_dblogmode, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>1h</delay><trends>0</trends><value_type>TEXT</value_type><params>select log_mode from gv$database</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{diff(0)}=1</expression><name>DB log mode changed to  {ITEM.VALUE1}</name><priority>INFO</priority><tags><tag><tag>Who</tag><value>DBAdminn</value></tag></tags></trigger></triggers></item><item><name>DB Physical Reads</name><type>ODBC</type><key>db.odbc.select[ora_dbphysicalread, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>blk/min</units><params>select sum(decode(name,'physical reads', value,0)) &quot;phys_reads&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>DB Platform</name><type>ODBC</type><key>db.odbc.select[ora_dbplatform, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>1h</delay><trends>0</trends><value_type>TEXT</value_type><params>select platform_name from gv$database</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing></item><item><name>DB DataFilesSize</name><type>ODBC</type><key>db.odbc.select[ora_dbsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><units>B</units><params>SELECT SUM(NVL(bytes,0)) val FROM dba_data_files</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Size</name></application></applications></item><item><name>DB Version</name><type>ODBC</type><key>db.odbc.select[ora_dbversion, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>1h</delay><trends>0</trends><value_type>TEXT</value_type><params>select * from v$version where banner like '%Database%'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing></item><item><name>Hit ratio - BODY</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace ='BODY'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Hit ratio - SQLAREA</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace ='SQL AREA'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Hit ratio - TABLE/PROCEDURE</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_table_proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace = 'TABLE/PROCEDURE'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Hit ratio - TRIGGER</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace ='TRIGGER'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Index Unusable</name><type>ODBC</type><key>db.odbc.select[ora_index_unusable, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><params>select count(*) from ( select 1 from  DBA_INDEXES           where  status='UNUSABLE' union all &#13;
   select 1 from  DBA_IND_PARTITIONS    where  status='UNUSABLE' union all &#13;
   select 1 from  DBA_IND_SUBPARTITIONS where  status='UNUSABLE')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Index unusable found</name><priority>AVERAGE</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Invalid objects count</name><type>ODBC</type><key>db.odbc.select[ora_invalidobj, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><params>select count(*) from dba_objects where status='INVALID'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Job failure</name><type>ODBC</type><key>db.odbc.select[ora_jobfail, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><value_type>TEXT</value_type><params>select '['||schema_user||', B:'||broken||', F:'||failures||']' as status from dba_jobs where failures&gt;0 union select 'none' from dual</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none)}=0</expression><name>Job Fail: {ITEM.VALUE1}</name><priority>WARNING</priority><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmini</value></tag></tags></trigger></triggers></item><item><name>Job queue proceses</name><type>ODBC</type><key>db.odbc.select[ora_jobqporc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><params>select value from gv$parameter where name='job_queue_processes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Job stopped</name><type>ODBC</type><key>db.odbc.select[ora_jobstopped, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><value_type>TEXT</value_type><params>select '['||schema_user||', B:'||broken||', F:'||failures||']' as status from dba_jobs where broken='Y' and failures=0 union select 'none' from dual</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none)}=0</expression><name>Job Stopped: {ITEM.VALUE1}</name><priority>INFO</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>L I/O Block Change</name><type>ODBC</type><key>db.odbc.select[ora_lio_block_changes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>SELECT to_char(SUM(DECODE(NAME,'db block changes',VALUE,0))) FROM GV$SYSSTAT WHERE NAME ='db block changes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>L I/O Consinstent Read</name><type>ODBC</type><key>db.odbc.select[ora_lio_consistent_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><units>block/min</units><params>SELECT to_char(sum(decode(name,'consistent gets',value,0))) FROM GV$SYSSTAT WHERE NAME ='consistent gets'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>L I/O Current Read</name><type>ODBC</type><key>db.odbc.select[ora_lio_current_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>SELECT to_char(sum(decode(name,'db block gets',value,0))) FROM GV$SYSSTAT WHERE NAME ='db block gets'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Locks5</name><type>ODBC</type><key>db.odbc.select[ora_locks5, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><trends>0</trends><value_type>TEXT</value_type><params>SELECT LISTAGG(lock1, CHR(10)) WITHIN GROUP (order by rownum asc)from&#13;
(select CHR(10)||'This DB User '||gvs.USERNAME||' OS: '||gvs.OSUSER||'/'||gvs.MACHINE||' (sid:'||gvh.sid||', serial:'||gvs.serial#||', inst_id: '||gvh.inst_id||', Status: '||gvs.status||', Module: '||gvs.module||')'||CHR(10)||&#13;
'Running sql: '||CHR(10)||&#13;
NVL(sq.sql_text,'INACTIVE')||CHR(10)||&#13;
'Kill command: alter system kill session '|| '''' || gvh.sid || ',' || gvs.serial# || ',@'||gvh.inst_id ||''';'||CHR(10)||&#13;
'Blocks DB User '||gvs2.USERNAME||' OS: '||gvs2.OSUSER||'/'||gvs2.MACHINE||' (sid:'||gvw.sid||', serial:'||gvs2.serial#||', inst_id: '||gvw.inst_id||', Status: '||gvs2.status||', Module: '||gvs2.module||')'||'for '||gvs2.seconds_in_wait||'s '||CHR(10)||&#13;
'Running sql: '||sq2.sql_text as lock1&#13;
FROM gv$lock gvh, gv$lock gvw, gv$session gvs, gv$sql sq, gv$session gvs2, gv$sql sq2&#13;
WHERE (gvh.id1, gvh.id2) in (&#13;
           SELECT id1, id2 FROM gv$lock WHERE request=0&#13;
                INTERSECT&#13;
           SELECT id1, id2 FROM gv$lock WHERE lmode=0)&#13;
  AND gvh.id1=gvw.id1&#13;
  AND gvh.id2=gvw.id2&#13;
  AND gvh.request=0&#13;
  AND gvw.lmode=0&#13;
  AND gvh.sid=gvs.sid&#13;
  AND gvh.inst_id=gvs.inst_id&#13;
  AND gvs.sql_id = sq.sql_id(+)&#13;
  AND gvw.sid=gvs2.sid&#13;
  AND gvw.inst_id=gvs2.inst_id&#13;
  AND gvs2.sql_id = sq2.sql_id&#13;
  and gvs2.seconds_in_wait &gt; 180&#13;
  order by gvs2.seconds_in_wait desc)&#13;
      union select 'none' from dual;</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none,#3)}=0</expression><name>Locks</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Max Processes</name><type>ODBC</type><key>db.odbc.select[ora_maxprocs, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>select value &quot;maxprocs&quot; from gv$parameter where name ='processes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Max Sessions</name><type>ODBC</type><key>db.odbc.select[ora_maxsession, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>select value &quot;maxsess&quot; from gv$parameter where name ='sessions'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Miss Latch</name><type>ODBC</type><key>db.odbc.select[ora_miss_latch, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><params>SELECT SUM(misses) FROM GV$LATCH</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>PGA</name><type>ODBC</type><key>db.odbc.select[ora_pga, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>select  value from GV$PGASTAT where name in 'total PGA inuse'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>PGA Aggregate target</name><type>ODBC</type><key>db.odbc.select[ora_pga_aggregate_target, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>select  value from GV$PGASTAT where name in 'aggregate PGA target parameter'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Phys i/o Datafile Reads</name><type>ODBC</type><key>db.odbc.select[ora_phio_datafile_reads, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>io/sec</units><params>select to_char(sum(decode(name,'physical reads direct',value,0))) FROM GV$SYSSTAT where name ='physical reads direct'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Phys i/o Datafile Writes</name><type>ODBC</type><key>db.odbc.select[ora_phio_datafile_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>io/sec</units><params>select to_char(sum(decode(name,'physical writes direct',value,0))) FROM GV$SYSSTAT where name ='physical writes direct'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Phys i/o Redo Writes</name><type>ODBC</type><key>db.odbc.select[ora_phio_redo_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>io/sec</units><params>select to_char(sum(decode(name,'redo writes',value,0))) FROM GV$SYSSTAT where name ='redo writes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Pin hit ratio - BODY</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='BODY'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pin hit ratio - SQLAREA</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='SQL AREA'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pin hit ratio - TABLE-PROCEDURE</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_table-proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='TABLE/PROCEDURE'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pin hit ratio - TRIGGER</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='TRIGGER'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool dict cache</name><type>ODBC</type><key>db.odbc.select[ora_pool_dict_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'dictionary cache',(bytes),0),0)),2)) pool_dict_cache FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool free mem</name><type>ODBC</type><key>db.odbc.select[ora_pool_free_mem, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'free memory',(bytes),0),0)),2)) pool_free_mem FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool lib cache</name><type>ODBC</type><key>db.odbc.select[ora_pool_lib_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'library cache',(bytes),0),0)),2)) pool_lib_cache FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool misc</name><type>ODBC</type><key>db.odbc.select[ora_pool_misc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'library cache',0,'dictionary cache',0,'free memory',0,'sql area', 0,(bytes)),0)),2)) pool_misc FROM V$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool sql area</name><type>ODBC</type><key>db.odbc.select[ora_pool_sql_area, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'sql area',(bytes),0),0)),2)) pool_sql_area FROM V$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Processes</name><type>ODBC</type><key>db.odbc.select[ora_procnum, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) &quot;procnum&quot; from gv$process</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Redo switches per 5min</name><type>ODBC</type><key>db.odbc.select[ora_redo_5min, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*)  from gv$log_history where thread#=(select thread# from gv$instance) and first_time between sysdate-5/24/60 and sysdate</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application><application><name>rac-off</name></application></applications></item><item><name>Redo switches per hour</name><type>ODBC</type><key>db.odbc.select[ora_redo_hr, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><params>select count(*)  from gv$log_history where thread#=(select thread# from gv$instance) and first_time between sysdate-1/24 and sysdate</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application><application><name>rac-off</name></application></applications></item><item><name>Resumable sessions</name><type>ODBC</type><key>db.odbc.select[ora_resumable_ses, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><params>select count(*) from dba_resumable where suspend_time is not null and (resume_time is  null or resume_time&lt;suspend_time);</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Resumable sessions found</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Sessions</name><type>ODBC</type><key>db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) from gv$session</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Session Active</name><type>ODBC</type><key>db.odbc.select[ora_session_active, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) from gv$session where WAIT_CLASS&lt;&gt;'Idle'  and type &lt;&gt; 'BACKGROUND';</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications><triggers><trigger><expression>{avg(5m)}&gt;15</expression><name>Active Session &gt;15</name><priority>WARNING</priority><description>WARNING, average value for 5min!</description><dependencies><dependency><name>Active Session &gt;30</name><expression>{template_oracle_odbc:db.odbc.select[ora_session_active, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].avg(5m)}&gt;30</expression></dependency></dependencies><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>{avg(5m)}&gt;30</expression><name>Active Session &gt;30</name><priority>HIGH</priority><description>DANGER, average value for 5min!</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Session Inactive</name><type>ODBC</type><key>db.odbc.select[ora_session_inactive, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select SUM(Decode(Type, 'BACKGROUND', 0, Decode(Status, 'ACTIVE', 0, 1))) FROM GV$SESSION</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Session System</name><type>ODBC</type><key>db.odbc.select[ora_session_system, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select SUM(Decode(Type, 'BACKGROUND', 1, 0)) system_sessions FROM GV$SESSION</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>SGA buffer cache</name><type>ODBC</type><key>db.odbc.select[ora_sga_buffer_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT to_char(ROUND(SUM(decode(pool,NULL,decode(name,'db_block_buffers',(bytes),'buffer_cache',(bytes),0),0)),2)) sga_bufcache FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA fixed</name><type>ODBC</type><key>db.odbc.select[ora_sga_fixed, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,NULL,decode(name,'fixed_sga',(bytes),0),0)),2)) sga_fixed FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA java pool</name><type>ODBC</type><key>db.odbc.select[ora_sga_java_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT to_char(ROUND(SUM(decode(pool,'java pool',(bytes),0)),2)) sga_jpool FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA large pool</name><type>ODBC</type><key>db.odbc.select[ora_sga_large_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT to_char(ROUND(SUM(decode(pool,'large pool',(bytes),0)),2)) sga_lpool FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA log buffer</name><type>ODBC</type><key>db.odbc.select[ora_sga_log_buffer, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,NULL,decode(name,'log_buffer',(bytes),0),0)),2)) sga_lbuffer FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA shared pool</name><type>ODBC</type><key>db.odbc.select[ora_sga_shared_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'library cache',0,'dictionary cache',0,'free memory',0,'sql area',0,(bytes)),0)),2)) pool_misc FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Sql Query Not Indexed</name><type>ODBC</type><key>db.odbc.select[ora_sqlnotindexed, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><params>SELECT SUM(DECODE(NAME, 'table scans (long tables)', VALUE, 0))/ (SUM(DECODE(NAME, 'table scans (long tables)', VALUE, 0))+SUM(DECODE(NAME, 'table scans (short tables)', VALUE, 0)))*100 SQL_NOT_INDEXED FROM GV$SYSSTAT WHERE 1=1 AND ( NAME IN ('table scans (long tables)','table scans (short tables)') )</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Uptime</name><type>ODBC</type><key>db.odbc.select[ora_uptime, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>uptime</units><params>select to_char((sysdate-startup_time)*86400, 'FM99999999999999990') retvalue from gv$instance</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{nodata(15m)}=1</expression><name>DB Alive</name><priority>AVERAGE</priority><description>Zabbix NOT received data from DB over 6 min. (3 times try) Check TNS, DB, ODBC conn. from zabbix.</description><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>{last()}&lt;20m</expression><name>Uptime</name><priority>WARNING</priority><description>Uptime less 20 min. - DB  just (re)started</description><tags><tag><tag>Who</tag><value>DBAdminn</value></tag></tags></trigger></triggers></item><item><name>Users Connected</name><type>ODBC</type><key>db.odbc.select[ora_userconn, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><params>select count(username) from gv$session where username is not null</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Users Locked</name><type>ODBC</type><key>db.odbc.select[ora_users_locked, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><trends>0</trends><value_type>TEXT</value_type><params>SELECT username || ' ' || lock_date || ' ' || account_status as res&#13;
  FROM dba_users&#13;
 where ACCOUNT_STATUS like 'EXPIRED(GRACE)'&#13;
    or ACCOUNT_STATUS like 'LOCKED(TIMED)'&#13;
union&#13;
select 'none' from dual</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none)}=0</expression><name>User Locked : {ITEM.VALUE1}</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Waits Controlfile I/O</name><type>ODBC</type><key>db.odbc.select[ora_waits_controfileio, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'control file sequential read', total_waits, 'control file single write', total_waits, 'control file parallel write',total_waits,0))) ControlFileIO FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client','pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits direct path read</name><type>ODBC</type><key>db.odbc.select[ora_waits_directpath_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'direct path read',total_waits,0))) DirectPathRead FROM GV$system_event WHERE 1=1 AND event not in (   'SQL*Net message from ', 'SQL*Net more data from client','pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits File I/O</name><type>ODBC</type><key>db.odbc.select[ora_waits_file_io, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'file identify',total_waits, 'file open',total_waits,0))) FileIO FROM GV$system_event WHERE 1=1 AND event not in (   'SQL*Net message from client',   'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits Latch</name><type>ODBC</type><key>db.odbc.select[ora_waits_latch, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'control file sequential read', total_waits, 'control file single write', total_waits, 'control file parallel write',total_waits,0))) ControlFileIO FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits Logwrite</name><type>ODBC</type><key>db.odbc.select[ora_waits_logwrite, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'log file single write',total_waits, 'log file parallel write',total_waits,0))) LogWrite FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits multiblock read</name><type>ODBC</type><key>db.odbc.select[ora_waits_multiblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'db file scattered read',total_waits,0))) MultiBlockRead FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits others</name><type>ODBC</type><key>db.odbc.select[ora_waits_other, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'control file sequential read',0,'control file single write',0,'control file parallel write',0,'db file sequential read',0,'db file scattered read',0,'direct path read',0,'file identify',0,'file open',0,'SQL*Net message to client',0,'SQL*Net message to dblink',0, 'SQL*Net more data to client',0,'SQL*Net more data to dblink',0, 'SQL*Net break/reset to client',0,'SQL*Net break/reset to dblink',0, 'log file single write',0,'log file parallel write',0,total_waits))) Other FROM GV$system_event WHERE 1=1 AND event not in (  'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message',  'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits single block read</name><type>ODBC</type><key>db.odbc.select[ora_waits_singleblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'db file sequential read',total_waits,0))) SingleBlockRead FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits SQLNet</name><type>ODBC</type><key>db.odbc.select[ora_waits_sqlnet, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'SQL*Net message to client',total_waits,'SQL*Net message to dblink',total_waits,'SQL*Net more data to client',total_waits,'SQL*Net more data to dblink',total_waits,'SQL*Net break/reset to client',total_waits,'SQL*Net break/reset to dblink',total_waits,0))) SQLNET FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client','SQL*Net more data from client','pmon timer','rdbms ipc message','rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Closed wallets</name><type>ODBC</type><key>db.odbc.select[ora_wallets.closed.cnt, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><params>select count(t.encrypted||w.status) CLOSED_WALLET from V$ENCRYPTION_WALLET w, dba_tablespaces t where t.encrypted='YES' and w.status!='OPEN'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Wallet is closed</name><priority>HIGH</priority><description>Closed status for wallet found</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item></items><discovery_rules><discovery_rule><name>ASMD</name><type>ODBC</type><key>db.odbc.discovery[ora_asmd,{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>SELECT name AS ASMD FROM v$asm_diskgroup</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><lifetime>1d</lifetime><item_prototypes><item_prototype><name>ASM Free size of {#ASMD}</name><type>ODBC</type><key>db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT free_mb*1024*1024 AS freebytes FROM v$asm_diskgroup &#13;
WHERE name= '{#ASMD}'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>ASM</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>ASM Total size of {#ASMD}</name><type>ODBC</type><key>db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT total_mb*1024*1024 AS maxbytes FROM v$asm_diskgroup &#13;
WHERE name= '{#ASMD}'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>ASM</name></application_prototype></application_prototypes></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;5</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;7</recovery_expression><name>Free ASM Space less 5% for {#ASMD}</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype><trigger_prototype><expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;20</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;21</recovery_expression><name>Free ASM Space less 20% for {#ASMD}</name><priority>HIGH</priority><description>Warning escalate to disaster if free &lt; 5%. Warning off if free &gt; 24%</description><dependencies><dependency><name>Free ASM Space less 5% for {#ASMD}</name><expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;5</expression><recovery_expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;7</recovery_expression></dependency></dependencies><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype></trigger_prototypes></discovery_rule><discovery_rule><name>TBSPC</name><type>ODBC</type><key>db.odbc.discovery[ora_tablespacenames,{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>SELECT tablespace_name AS TBSPC FROM dba_tablespaces</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><lifetime>1d</lifetime><item_prototypes><item_prototype><name>tablespace {#TBSPC} maxsize</name><type>ODBC</type><key>db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT SUM(NVL((CASE maxbytes WHEN 0 THEN bytes ELSE maxbytes END),0)) AS maxbytes&#13;
FROM dba_data_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name&#13;
UNION ALL&#13;
SELECT SUM(NVL((CASE maxbytes WHEN 0 THEN bytes ELSE maxbytes END),0)) AS maxbytes&#13;
FROM dba_temp_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>tablespace {#TBSPC} size</name><type>ODBC</type><key>db.odbc.select[ora_tablespace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT SUM(NVL(bytes,0)) AS bytes&#13;
FROM dba_data_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name&#13;
UNION ALL&#13;
SELECT SUM(NVL(bytes,0)) AS bytes&#13;
FROM dba_temp_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>tablespace {#TBSPC} used %</name><type>ODBC</type><key>db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>SELECT round(used_percent,2) FROM dba_tablespace_usage_metrics WHERE tablespace_name = '{#TBSPC}'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>tablespace {#TBSPC} used</name><type>ODBC</type><key>db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT used_space * (SELECT block_size FROM dba_tablespaces WHERE tablespace_name=um.tablespace_name) FROM dba_tablespace_usage_metrics UM  WHERE tablespace_name =  '{#TBSPC}';</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&gt;85 and&#13;
({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;999G</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&lt;80 and&#13;
({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;9M</recovery_expression><name>Tablespace {#TBSPC} used over 85%</name><priority>HIGH</priority><manual_close>YES</manual_close><dependencies><dependency><name>Tablespace {#TBSPC} used over 98%</name><expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&gt;98 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;999G</expression><recovery_expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&lt;96 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;9M</recovery_expression></dependency></dependencies><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype><trigger_prototype><expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&gt;98 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;999G</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&lt;96 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;9M</recovery_expression><name>Tablespace {#TBSPC} used over 98%</name><priority>DISASTER</priority><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><name>size of {#TBSPC}</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>AA0000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>008800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_tablespace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$DSN}</macro></macro><macro><macro>{$ORACLE.CONN.STR}</macro><value>Driver=/usr/lib/oracle/19.15/client64/lib/libsqora.so.19.1;DBQ=//10.133.253.44:49161/XE;UID=system;PWD=oracle;</value></macro><macro><macro>{$ORACLE.PASSWORD}</macro><value>oracle</value></macro><macro><macro>{$ORACLE.USER}</macro><value>system</value></macro><macro><macro>{$ORA_PASS}</macro><value>oracle</value></macro><macro><macro>{$ORA_USER}</macro><value>system</value></macro><macro><macro>{$RANK}</macro><value>Prod</value></macro></macros></template></templates><triggers><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_pga, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_pga_aggregate_target, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;90</expression><name>PGA Alarm</name><status>DISABLED</status><priority>INFO</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_procnum, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_maxprocs, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;80</expression><name>Process Alarm</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_maxsession, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;80</expression><name>Session Alarm over 80% of max</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_maxsession, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;98</expression><name>Session Alarm over 98% of max</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers><graphs><graph><name>DB ArchivelogsSize</name><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>6666FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_dbarchlogsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>DB Size</name><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>FILLED_REGION</drawtype><color>6666FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_dbsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>FILLED_REGION</drawtype><color>00C800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_dbdatasize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Events Waits</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>CCFFCC</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_latch, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>CCCCFF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_file_io, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>FF3333</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_other, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>FF33FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_singleblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>FFFF33</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_multiblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>5</sortorder><color>009900</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_directpath_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>6</sortorder><color>888888</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_sqlnet, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>7</sortorder><color>00BBBB</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_controfileio, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>8</sortorder><color>FFCCCC</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_logwrite, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Hit Ratio</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><color>009900</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_table_proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>FFFF33</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>FFCCFF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Logical I/O</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_lio_consistent_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>00EEEE</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_lio_block_changes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>FF9999</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_lio_current_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>PGA</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>00CC00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pga, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>000000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pga_aggregate_target, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Physical I/O</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_phio_redo_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>33FFFF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_phio_datafile_reads, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>GRADIENT_LINE</drawtype><color>FF9999</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_phio_datafile_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Pin Hit Ratio</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><color>0000CC</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_table-proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>CCCC00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>C800C8</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>00DD00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Session/Process</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>0000DD</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>00CC00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_procnum, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Sessions</name><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session_inactive, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>FF33FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session_system, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>GRADIENT_LINE</drawtype><color>00BB00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session_active, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>SGA Memory Usage</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>00BB00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_buffer_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>EE0000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_fixed, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>00DDDD</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_java_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>FF66FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_large_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>C8C800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_log_buffer, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>5</sortorder><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_shared_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Shared Pool</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>00C800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_dict_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>C80000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_free_mem, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>008888</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_lib_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>C800C8</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_misc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>EEEE00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_sql_area, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2023-06-28T06:59:18Z</date><groups><group><name>Templates/Databases</name></group></groups><templates><template><template>template_oracle_odbc</template><name>Template Oracle ODBC</name><description>Template Oracle ODBC</description><groups><group><name>Templates/Databases</name></group></groups><applications><application><name>Oracle</name></application><application><name>Oracle Connections</name></application><application><name>Oracle Performance</name></application><application><name>Oracle Size</name></application><application><name>Oracle Text</name></application><application><name>rac-off</name></application></applications><items><item><name>Archivelog</name><type>ODBC</type><key>db.odbc.select[ora_archive, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>5m</delay><value_type>FLOAT</value_type><units>B</units><params>select nvl(sum(BLOCKS*BLOCK_SIZE),0) from v$archived_log where COMPLETION_TIME &gt;= (sysdate - 5 / 60 / 24);</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;5G</expression><name>Archivelog</name><priority>WARNING</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Archivelog Dest Status</name><type>ODBC</type><key>db.odbc.select[ora_archive_dest_st, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><trends>0</trends><value_type>TEXT</value_type><params>SELECT 'InstID:['||inst_id||'DestID:['||dest_id||'], Status:['||status||'], Error:['||error||'].' FROM gv$archive_dest WHERE destination is NOT NULL and status != 'VALID' union select 'ok' from dual ORDER BY 1</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(ok)}=0</expression><name>Archivelog Destinations</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>ASM diskstate</name><type>ODBC</type><key>db.odbc.select[ora_asm_diskstate, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>5m</delay><trends>0</trends><value_type>FLOAT</value_type><params>select count(*) from v$asm_disk where state not in ('NORMAL','ADDING','UNKNOWN');</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Bad ASM disk state</name><priority>DISASTER</priority><description>ASM disk state not in ('NORMAL','ADDING','UNKNOWN'), check ASM disks!</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Backup Full days ago</name><type>ODBC</type><key>db.odbc.select[ora_backup0ago, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><value_type>FLOAT</value_type><units>day</units><params>select nvl(round(sysdate-max(completion_time),1),-1) DAYS_AGO from gv$backup_set where incremental_level=0</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;8</expression><name>Backup FULL (Days)</name><priority>HIGH</priority><description>Last full backup too old</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Backup incr days ago</name><type>ODBC</type><key>db.odbc.select[ora_backup1ago, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><value_type>FLOAT</value_type><units>day</units><params>select nvl(round(sysdate-max(completion_time),1),-1) DAYS_AGO from gv$backup_set where incremental_level=1</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;3</expression><name>Backup INCR (Days)</name><priority>HIGH</priority><description>Last incremental backup too old</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Corrupted blocks</name><type>ODBC</type><key>db.odbc.select[ora_corruptblocks, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) from gv$database_block_corruption</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Corrupted blocks found</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>DB ArchivelogsSize</name><type>ODBC</type><key>db.odbc.select[ora_dbarchlogsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><units>B</units><params>select nvl(to_char(sum(block_size*blocks),999999999999999),0) bytes from v$archived_log where status='A'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Size</name></application></applications></item><item><name>DB Block Gets</name><type>ODBC</type><key>db.odbc.select[ora_dbblockgets, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>select to_char(sum(decode(name,'db block gets', value,0))) &quot;block_gets&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>DB Consistent Gets</name><type>ODBC</type><key>db.odbc.select[ora_dbconsistentgets, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>select to_char(sum(decode(name,'consistent gets', value,0))) &quot;consistent_gets&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>DB Data Size</name><type>ODBC</type><key>db.odbc.select[ora_dbdatasize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><units>B</units><params>select to_char(sum(bytes),999999999999999) bytes from dba_segments</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Size</name></application></applications></item><item><name>DB Hit Ratio</name><type>ODBC</type><key>db.odbc.select[ora_dbhitratio, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><params>select ( sum(decode(name,'consistent gets', value,0)) + sum(decode(name,'db block gets', value,0)) - sum(decode(name,'physical reads', value,0))) / (sum(decode(name,'consistent gets', value,0)) + sum(decode(name,'db block gets', value,0)) ) * 100 &quot;hit_ratio&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>DB Log Mode</name><type>ODBC</type><key>db.odbc.select[ora_dblogmode, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>1h</delay><trends>0</trends><value_type>TEXT</value_type><params>select log_mode from gv$database</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{diff(0)}=1</expression><name>DB log mode changed to  {ITEM.VALUE1}</name><priority>INFO</priority><tags><tag><tag>Who</tag><value>DBAdminn</value></tag></tags></trigger></triggers></item><item><name>DB Physical Reads</name><type>ODBC</type><key>db.odbc.select[ora_dbphysicalread, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>blk/min</units><params>select sum(decode(name,'physical reads', value,0)) &quot;phys_reads&quot; FROM gv$sysstat</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>DB Platform</name><type>ODBC</type><key>db.odbc.select[ora_dbplatform, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>1h</delay><trends>0</trends><value_type>TEXT</value_type><params>select platform_name from gv$database</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing></item><item><name>DB DataFilesSize</name><type>ODBC</type><key>db.odbc.select[ora_dbsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>30m</delay><units>B</units><params>SELECT SUM(NVL(bytes,0)) val FROM dba_data_files</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Size</name></application></applications></item><item><name>DB Version</name><type>ODBC</type><key>db.odbc.select[ora_dbversion, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>1h</delay><trends>0</trends><value_type>TEXT</value_type><params>select * from v$version where banner like '%Database%'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing></item><item><name>Hit ratio - BODY</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace ='BODY'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Hit ratio - SQLAREA</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace ='SQL AREA'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Hit ratio - TABLE/PROCEDURE</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_table_proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace = 'TABLE/PROCEDURE'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Hit ratio - TRIGGER</name><type>ODBC</type><key>db.odbc.select[ora_hitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select gethitratio*100 &quot;get_pct&quot; FROM gv$librarycache where namespace ='TRIGGER'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Index Unusable</name><type>ODBC</type><key>db.odbc.select[ora_index_unusable, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><params>select count(*) from ( select 1 from  DBA_INDEXES           where  status='UNUSABLE' union all &#13;
   select 1 from  DBA_IND_PARTITIONS    where  status='UNUSABLE' union all &#13;
   select 1 from  DBA_IND_SUBPARTITIONS where  status='UNUSABLE')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Index unusable found</name><priority>AVERAGE</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Invalid objects count</name><type>ODBC</type><key>db.odbc.select[ora_invalidobj, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><params>select count(*) from dba_objects where status='INVALID'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Job failure</name><type>ODBC</type><key>db.odbc.select[ora_jobfail, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><value_type>TEXT</value_type><params>select '['||schema_user||', B:'||broken||', F:'||failures||']' as status from dba_jobs where failures&gt;0 union select 'none' from dual</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none)}=0</expression><name>Job Fail: {ITEM.VALUE1}</name><priority>WARNING</priority><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmini</value></tag></tags></trigger></triggers></item><item><name>Job queue proceses</name><type>ODBC</type><key>db.odbc.select[ora_jobqporc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><params>select value from gv$parameter where name='job_queue_processes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Job stopped</name><type>ODBC</type><key>db.odbc.select[ora_jobstopped, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><trends>0</trends><value_type>TEXT</value_type><params>select '['||schema_user||', B:'||broken||', F:'||failures||']' as status from dba_jobs where broken='Y' and failures=0 union select 'none' from dual</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none)}=0</expression><name>Job Stopped: {ITEM.VALUE1}</name><priority>INFO</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>L I/O Block Change</name><type>ODBC</type><key>db.odbc.select[ora_lio_block_changes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>SELECT to_char(SUM(DECODE(NAME,'db block changes',VALUE,0))) FROM GV$SYSSTAT WHERE NAME ='db block changes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>L I/O Consinstent Read</name><type>ODBC</type><key>db.odbc.select[ora_lio_consistent_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><units>block/min</units><params>SELECT to_char(sum(decode(name,'consistent gets',value,0))) FROM GV$SYSSTAT WHERE NAME ='consistent gets'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>L I/O Current Read</name><type>ODBC</type><key>db.odbc.select[ora_lio_current_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>block/min</units><params>SELECT to_char(sum(decode(name,'db block gets',value,0))) FROM GV$SYSSTAT WHERE NAME ='db block gets'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Locks5</name><type>ODBC</type><key>db.odbc.select[ora_locks5, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><trends>0</trends><value_type>TEXT</value_type><params>SELECT LISTAGG(lock1, CHR(10)) WITHIN GROUP (order by rownum asc)from&#13;
(select CHR(10)||'This DB User '||gvs.USERNAME||' OS: '||gvs.OSUSER||'/'||gvs.MACHINE||' (sid:'||gvh.sid||', serial:'||gvs.serial#||', inst_id: '||gvh.inst_id||', Status: '||gvs.status||', Module: '||gvs.module||')'||CHR(10)||&#13;
'Running sql: '||CHR(10)||&#13;
NVL(sq.sql_text,'INACTIVE')||CHR(10)||&#13;
'Kill command: alter system kill session '|| '''' || gvh.sid || ',' || gvs.serial# || ',@'||gvh.inst_id ||''';'||CHR(10)||&#13;
'Blocks DB User '||gvs2.USERNAME||' OS: '||gvs2.OSUSER||'/'||gvs2.MACHINE||' (sid:'||gvw.sid||', serial:'||gvs2.serial#||', inst_id: '||gvw.inst_id||', Status: '||gvs2.status||', Module: '||gvs2.module||')'||'for '||gvs2.seconds_in_wait||'s '||CHR(10)||&#13;
'Running sql: '||sq2.sql_text as lock1&#13;
FROM gv$lock gvh, gv$lock gvw, gv$session gvs, gv$sql sq, gv$session gvs2, gv$sql sq2&#13;
WHERE (gvh.id1, gvh.id2) in (&#13;
           SELECT id1, id2 FROM gv$lock WHERE request=0&#13;
                INTERSECT&#13;
           SELECT id1, id2 FROM gv$lock WHERE lmode=0)&#13;
  AND gvh.id1=gvw.id1&#13;
  AND gvh.id2=gvw.id2&#13;
  AND gvh.request=0&#13;
  AND gvw.lmode=0&#13;
  AND gvh.sid=gvs.sid&#13;
  AND gvh.inst_id=gvs.inst_id&#13;
  AND gvs.sql_id = sq.sql_id(+)&#13;
  AND gvw.sid=gvs2.sid&#13;
  AND gvw.inst_id=gvs2.inst_id&#13;
  AND gvs2.sql_id = sq2.sql_id&#13;
  and gvs2.seconds_in_wait &gt; 180&#13;
  order by gvs2.seconds_in_wait desc)&#13;
      union select 'none' from dual;</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none,#3)}=0</expression><name>Locks</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Max Processes</name><type>ODBC</type><key>db.odbc.select[ora_maxprocs, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>select value &quot;maxprocs&quot; from gv$parameter where name ='processes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Max Sessions</name><type>ODBC</type><key>db.odbc.select[ora_maxsession, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>select value &quot;maxsess&quot; from gv$parameter where name ='sessions'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Miss Latch</name><type>ODBC</type><key>db.odbc.select[ora_miss_latch, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><params>SELECT SUM(misses) FROM GV$LATCH</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>PGA</name><type>ODBC</type><key>db.odbc.select[ora_pga, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>select  value from GV$PGASTAT where name in 'total PGA inuse'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>PGA Aggregate target</name><type>ODBC</type><key>db.odbc.select[ora_pga_aggregate_target, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>select  value from GV$PGASTAT where name in 'aggregate PGA target parameter'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Phys i/o Datafile Reads</name><type>ODBC</type><key>db.odbc.select[ora_phio_datafile_reads, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>io/sec</units><params>select to_char(sum(decode(name,'physical reads direct',value,0))) FROM GV$SYSSTAT where name ='physical reads direct'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Phys i/o Datafile Writes</name><type>ODBC</type><key>db.odbc.select[ora_phio_datafile_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>io/sec</units><params>select to_char(sum(decode(name,'physical writes direct',value,0))) FROM GV$SYSSTAT where name ='physical writes direct'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Phys i/o Redo Writes</name><type>ODBC</type><key>db.odbc.select[ora_phio_redo_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>io/sec</units><params>select to_char(sum(decode(name,'redo writes',value,0))) FROM GV$SYSSTAT where name ='redo writes'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item><item><name>Pin hit ratio - BODY</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='BODY'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pin hit ratio - SQLAREA</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='SQL AREA'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pin hit ratio - TABLE-PROCEDURE</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_table-proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='TABLE/PROCEDURE'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pin hit ratio - TRIGGER</name><type>ODBC</type><key>db.odbc.select[ora_pinhitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>select ROUND(pins/(pins+reloads)*100,2) &quot;pin_hit ratio&quot; FROM gv$librarycache where namespace ='TRIGGER'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool dict cache</name><type>ODBC</type><key>db.odbc.select[ora_pool_dict_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'dictionary cache',(bytes),0),0)),2)) pool_dict_cache FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool free mem</name><type>ODBC</type><key>db.odbc.select[ora_pool_free_mem, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'free memory',(bytes),0),0)),2)) pool_free_mem FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool lib cache</name><type>ODBC</type><key>db.odbc.select[ora_pool_lib_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'library cache',(bytes),0),0)),2)) pool_lib_cache FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool misc</name><type>ODBC</type><key>db.odbc.select[ora_pool_misc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'library cache',0,'dictionary cache',0,'free memory',0,'sql area', 0,(bytes)),0)),2)) pool_misc FROM V$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Pool sql area</name><type>ODBC</type><key>db.odbc.select[ora_pool_sql_area, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'sql area',(bytes),0),0)),2)) pool_sql_area FROM V$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Processes</name><type>ODBC</type><key>db.odbc.select[ora_procnum, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) &quot;procnum&quot; from gv$process</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Redo switches per 5min</name><type>ODBC</type><key>db.odbc.select[ora_redo_5min, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*)  from gv$log_history where thread#=(select thread# from gv$instance) and first_time between sysdate-5/24/60 and sysdate</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application><application><name>rac-off</name></application></applications></item><item><name>Redo switches per hour</name><type>ODBC</type><key>db.odbc.select[ora_redo_hr, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><params>select count(*)  from gv$log_history where thread#=(select thread# from gv$instance) and first_time between sysdate-1/24 and sysdate</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application><application><name>rac-off</name></application></applications></item><item><name>Resumable sessions</name><type>ODBC</type><key>db.odbc.select[ora_resumable_ses, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><params>select count(*) from dba_resumable where suspend_time is not null and (resume_time is  null or resume_time&lt;suspend_time);</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Resumable sessions found</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Sessions</name><type>ODBC</type><key>db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) from gv$session</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Session Active</name><type>ODBC</type><key>db.odbc.select[ora_session_active, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select count(*) from gv$session where WAIT_CLASS&lt;&gt;'Idle'  and type &lt;&gt; 'BACKGROUND';</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications><triggers><trigger><expression>{avg(5m)}&gt;15</expression><name>Active Session &gt;15</name><priority>WARNING</priority><description>WARNING, average value for 5min!</description><dependencies><dependency><name>Active Session &gt;30</name><expression>{template_oracle_odbc:db.odbc.select[ora_session_active, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].avg(5m)}&gt;30</expression></dependency></dependencies><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>{avg(5m)}&gt;30</expression><name>Active Session &gt;30</name><priority>HIGH</priority><description>DANGER, average value for 5min!</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Session Inactive</name><type>ODBC</type><key>db.odbc.select[ora_session_inactive, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select SUM(Decode(Type, 'BACKGROUND', 0, Decode(Status, 'ACTIVE', 0, 1))) FROM GV$SESSION</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>Session System</name><type>ODBC</type><key>db.odbc.select[ora_session_system, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><params>select SUM(Decode(Type, 'BACKGROUND', 1, 0)) system_sessions FROM GV$SESSION</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application><application><name>rac-off</name></application></applications></item><item><name>SGA buffer cache</name><type>ODBC</type><key>db.odbc.select[ora_sga_buffer_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT to_char(ROUND(SUM(decode(pool,NULL,decode(name,'db_block_buffers',(bytes),'buffer_cache',(bytes),0),0)),2)) sga_bufcache FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA fixed</name><type>ODBC</type><key>db.odbc.select[ora_sga_fixed, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,NULL,decode(name,'fixed_sga',(bytes),0),0)),2)) sga_fixed FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA java pool</name><type>ODBC</type><key>db.odbc.select[ora_sga_java_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT to_char(ROUND(SUM(decode(pool,'java pool',(bytes),0)),2)) sga_jpool FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA large pool</name><type>ODBC</type><key>db.odbc.select[ora_sga_large_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT to_char(ROUND(SUM(decode(pool,'large pool',(bytes),0)),2)) sga_lpool FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA log buffer</name><type>ODBC</type><key>db.odbc.select[ora_sga_log_buffer, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,NULL,decode(name,'log_buffer',(bytes),0),0)),2)) sga_lbuffer FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>SGA shared pool</name><type>ODBC</type><key>db.odbc.select[ora_sga_shared_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT TO_CHAR(ROUND(SUM(decode(pool,'shared pool',decode(name,'library cache',0,'dictionary cache',0,'free memory',0,'sql area',0,(bytes)),0)),2)) pool_misc FROM GV$SGASTAT</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Sql Query Not Indexed</name><type>ODBC</type><key>db.odbc.select[ora_sqlnotindexed, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><value_type>FLOAT</value_type><params>SELECT SUM(DECODE(NAME, 'table scans (long tables)', VALUE, 0))/ (SUM(DECODE(NAME, 'table scans (long tables)', VALUE, 0))+SUM(DECODE(NAME, 'table scans (short tables)', VALUE, 0)))*100 SQL_NOT_INDEXED FROM GV$SYSSTAT WHERE 1=1 AND ( NAME IN ('table scans (long tables)','table scans (short tables)') )</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Uptime</name><type>ODBC</type><key>db.odbc.select[ora_uptime, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>uptime</units><params>select to_char((sysdate-startup_time)*86400, 'FM99999999999999990') retvalue from gv$instance</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{nodata(15m)}=1</expression><name>DB Alive</name><priority>AVERAGE</priority><description>Zabbix NOT received data from DB over 6 min. (3 times try) Check TNS, DB, ODBC conn. from zabbix.</description><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>{last()}&lt;20m</expression><name>Uptime</name><priority>WARNING</priority><description>Uptime less 20 min. - DB  just (re)started</description><tags><tag><tag>Who</tag><value>DBAdminn</value></tag></tags></trigger></triggers></item><item><name>Users Connected</name><type>ODBC</type><key>db.odbc.select[ora_userconn, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><params>select count(username) from gv$session where username is not null</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications></item><item><name>Users Locked</name><type>ODBC</type><key>db.odbc.select[ora_users_locked, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><trends>0</trends><value_type>TEXT</value_type><params>SELECT username || ' ' || lock_date || ' ' || account_status as res&#13;
  FROM dba_users&#13;
 where ACCOUNT_STATUS like 'EXPIRED(GRACE)'&#13;
    or ACCOUNT_STATUS like 'LOCKED(TIMED)'&#13;
union&#13;
select 'none' from dual</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Text</name></application></applications><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><params>8h</params></step></preprocessing><triggers><trigger><expression>{str(none)}=0</expression><name>User Locked : {ITEM.VALUE1}</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item><item><name>Waits Controlfile I/O</name><type>ODBC</type><key>db.odbc.select[ora_waits_controfileio, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'control file sequential read', total_waits, 'control file single write', total_waits, 'control file parallel write',total_waits,0))) ControlFileIO FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client','pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits direct path read</name><type>ODBC</type><key>db.odbc.select[ora_waits_directpath_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'direct path read',total_waits,0))) DirectPathRead FROM GV$system_event WHERE 1=1 AND event not in (   'SQL*Net message from ', 'SQL*Net more data from client','pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits File I/O</name><type>ODBC</type><key>db.odbc.select[ora_waits_file_io, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'file identify',total_waits, 'file open',total_waits,0))) FileIO FROM GV$system_event WHERE 1=1 AND event not in (   'SQL*Net message from client',   'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits Latch</name><type>ODBC</type><key>db.odbc.select[ora_waits_latch, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'control file sequential read', total_waits, 'control file single write', total_waits, 'control file parallel write',total_waits,0))) ControlFileIO FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits Logwrite</name><type>ODBC</type><key>db.odbc.select[ora_waits_logwrite, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'log file single write',total_waits, 'log file parallel write',total_waits,0))) LogWrite FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits multiblock read</name><type>ODBC</type><key>db.odbc.select[ora_waits_multiblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'db file scattered read',total_waits,0))) MultiBlockRead FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits others</name><type>ODBC</type><key>db.odbc.select[ora_waits_other, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'control file sequential read',0,'control file single write',0,'control file parallel write',0,'db file sequential read',0,'db file scattered read',0,'direct path read',0,'file identify',0,'file open',0,'SQL*Net message to client',0,'SQL*Net message to dblink',0, 'SQL*Net more data to client',0,'SQL*Net more data to dblink',0, 'SQL*Net break/reset to client',0,'SQL*Net break/reset to dblink',0, 'log file single write',0,'log file parallel write',0,total_waits))) Other FROM GV$system_event WHERE 1=1 AND event not in (  'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message',  'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits single block read</name><type>ODBC</type><key>db.odbc.select[ora_waits_singleblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'db file sequential read',total_waits,0))) SingleBlockRead FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client', 'SQL*Net more data from client', 'pmon timer', 'rdbms ipc message', 'rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Waits SQLNet</name><type>ODBC</type><key>db.odbc.select[ora_waits_sqlnet, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>60</delay><units>w/min</units><params>SELECT to_char(sum(decode(event,'SQL*Net message to client',total_waits,'SQL*Net message to dblink',total_waits,'SQL*Net more data to client',total_waits,'SQL*Net more data to dblink',total_waits,'SQL*Net break/reset to client',total_waits,'SQL*Net break/reset to dblink',total_waits,0))) SQLNET FROM GV$system_event WHERE 1=1 AND event not in ( 'SQL*Net message from client','SQL*Net more data from client','pmon timer','rdbms ipc message','rdbms ipc reply', 'smon timer')</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle Performance</name></application></applications><preprocessing><step><type>SIMPLE_CHANGE</type><params/></step></preprocessing></item><item><name>Closed wallets</name><type>ODBC</type><key>db.odbc.select[ora_wallets.closed.cnt, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>15m</delay><params>select count(t.encrypted||w.status) CLOSED_WALLET from V$ENCRYPTION_WALLET w, dba_tablespaces t where t.encrypted='YES' and w.status!='OPEN'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><applications><application><name>Oracle</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Wallet is closed</name><priority>HIGH</priority><description>Closed status for wallet found</description><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers></item></items><discovery_rules><discovery_rule><name>ASMD</name><type>ODBC</type><key>db.odbc.discovery[ora_asmd,{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>SELECT name AS ASMD FROM v$asm_diskgroup</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><lifetime>1d</lifetime><item_prototypes><item_prototype><name>ASM Free size of {#ASMD}</name><type>ODBC</type><key>db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT free_mb*1024*1024 AS freebytes FROM v$asm_diskgroup &#13;
WHERE name= '{#ASMD}'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>ASM</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>ASM Total size of {#ASMD}</name><type>ODBC</type><key>db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT total_mb*1024*1024 AS maxbytes FROM v$asm_diskgroup &#13;
WHERE name= '{#ASMD}'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>ASM</name></application_prototype></application_prototypes></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;5</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;7</recovery_expression><name>Free ASM Space less 5% for {#ASMD}</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype><trigger_prototype><expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;20</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;21</recovery_expression><name>Free ASM Space less 20% for {#ASMD}</name><priority>HIGH</priority><description>Warning escalate to disaster if free &lt; 5%. Warning off if free &gt; 24%</description><dependencies><dependency><name>Free ASM Space less 5% for {#ASMD}</name><expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;5</expression><recovery_expression>({template_oracle_odbc:db.odbc.select[ora_asm_free_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_asm_total_{#ASMD},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;7</recovery_expression></dependency></dependencies><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype></trigger_prototypes></discovery_rule><discovery_rule><name>TBSPC</name><type>ODBC</type><key>db.odbc.discovery[ora_tablespacenames,{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>10m</delay><params>SELECT tablespace_name AS TBSPC FROM dba_tablespaces</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><lifetime>1d</lifetime><item_prototypes><item_prototype><name>tablespace {#TBSPC} maxsize</name><type>ODBC</type><key>db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT SUM(NVL((CASE maxbytes WHEN 0 THEN bytes ELSE maxbytes END),0)) AS maxbytes&#13;
FROM dba_data_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name&#13;
UNION ALL&#13;
SELECT SUM(NVL((CASE maxbytes WHEN 0 THEN bytes ELSE maxbytes END),0)) AS maxbytes&#13;
FROM dba_temp_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>tablespace {#TBSPC} size</name><type>ODBC</type><key>db.odbc.select[ora_tablespace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><units>B</units><params>SELECT SUM(NVL(bytes,0)) AS bytes&#13;
FROM dba_data_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name&#13;
UNION ALL&#13;
SELECT SUM(NVL(bytes,0)) AS bytes&#13;
FROM dba_temp_files&#13;
WHERE tablespace_name = '{#TBSPC}'&#13;
GROUP BY tablespace_name</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>tablespace {#TBSPC} used %</name><type>ODBC</type><key>db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>%</units><params>SELECT round(used_percent,2) FROM dba_tablespace_usage_metrics WHERE tablespace_name = '{#TBSPC}'</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>tablespace {#TBSPC} used</name><type>ODBC</type><key>db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key><delay>2m</delay><value_type>FLOAT</value_type><units>B</units><params>SELECT used_space * (SELECT block_size FROM dba_tablespaces WHERE tablespace_name=um.tablespace_name) FROM dba_tablespace_usage_metrics UM  WHERE tablespace_name =  '{#TBSPC}';</params><username>{$ORA_USER}</username><password>{$ORA_PASS}</password><application_prototypes><application_prototype><name>Tables</name></application_prototype></application_prototypes></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&gt;85 and&#13;
({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;999G</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&lt;80 and&#13;
({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;9M</recovery_expression><name>Tablespace {#TBSPC} used over 85%</name><priority>HIGH</priority><manual_close>YES</manual_close><dependencies><dependency><name>Tablespace {#TBSPC} used over 98%</name><expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&gt;98 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;999G</expression><recovery_expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&lt;96 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;9M</recovery_expression></dependency></dependencies><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype><trigger_prototype><expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&gt;98 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&lt;999G</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>{template_oracle_odbc:db.odbc.select[ora_tableusedprc_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}&lt;96 and ({template_oracle_odbc:db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}-{template_oracle_odbc:db.odbc.select[ora_tableused_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;9M</recovery_expression><name>Tablespace {#TBSPC} used over 98%</name><priority>DISASTER</priority><manual_close>YES</manual_close><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><name>size of {#TBSPC}</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>AA0000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_tablemaxspace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>008800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_tablespace_{#TBSPC},{$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$DSN}</macro></macro><macro><macro>{$ORACLE.CONN.STR}</macro><value>Driver=/usr/lib/oracle/19.15/client64/lib/libsqora.so.19.1;DBQ=//10.133.253.44:49161/XE;UID=system;PWD=oracle;</value></macro><macro><macro>{$ORACLE.PASSWORD}</macro><value>oracle</value></macro><macro><macro>{$ORACLE.USER}</macro><value>system</value></macro><macro><macro>{$ORA_PASS}</macro><value>oracle</value></macro><macro><macro>{$ORA_USER}</macro><value>system</value></macro><macro><macro>{$RANK}</macro><value>Prod</value></macro></macros></template></templates><triggers><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_pga, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_pga_aggregate_target, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;90</expression><name>PGA Alarm</name><status>DISABLED</status><priority>INFO</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_procnum, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_maxprocs, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;80</expression><name>Process Alarm</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_maxsession, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;80</expression><name>Session Alarm over 80% of max</name><priority>HIGH</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger><trigger><expression>({template_oracle_odbc:db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()}*100/{template_oracle_odbc:db.odbc.select[ora_maxsession, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;].last()})&gt;98</expression><name>Session Alarm over 98% of max</name><priority>DISASTER</priority><tags><tag><tag>Who</tag><value>DBAdmin</value></tag></tags></trigger></triggers><graphs><graph><name>DB ArchivelogsSize</name><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>6666FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_dbarchlogsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>DB Size</name><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>FILLED_REGION</drawtype><color>6666FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_dbsize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>FILLED_REGION</drawtype><color>00C800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_dbdatasize, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Events Waits</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>CCFFCC</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_latch, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>CCCCFF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_file_io, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>FF3333</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_other, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>FF33FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_singleblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>FFFF33</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_multiblock_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>5</sortorder><color>009900</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_directpath_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>6</sortorder><color>888888</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_sqlnet, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>7</sortorder><color>00BBBB</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_controfileio, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>8</sortorder><color>FFCCCC</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_waits_logwrite, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Hit Ratio</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><color>009900</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_table_proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>FFFF33</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>FFCCFF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_hitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Logical I/O</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_lio_consistent_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>00EEEE</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_lio_block_changes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>FF9999</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_lio_current_read, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>PGA</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>00CC00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pga, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>000000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pga_aggregate_target, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Physical I/O</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_phio_redo_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>33FFFF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_phio_datafile_reads, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>GRADIENT_LINE</drawtype><color>FF9999</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_phio_datafile_writes, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Pin Hit Ratio</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><color>0000CC</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_table-proc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>CCCC00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_body, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>C800C8</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_sqlarea, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>00DD00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pinhitratio_trigger, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Session/Process</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>0000DD</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>00CC00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_procnum, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Sessions</name><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session_inactive, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>FF33FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session_system, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>GRADIENT_LINE</drawtype><color>00BB00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_session_active, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>SGA Memory Usage</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>00BB00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_buffer_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>EE0000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_fixed, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>00DDDD</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_java_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>FF66FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_large_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>C8C800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_log_buffer, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>5</sortorder><color>3333FF</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_sga_shared_pool, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph><graph><name>Shared Pool</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><ymin_type_1>FIXED</ymin_type_1><graph_items><graph_item><color>00C800</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_dict_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>C80000</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_free_mem, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>008888</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_lib_cache, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>C800C8</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_misc, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>EEEE00</color><item><host>template_oracle_odbc</host><key>db.odbc.select[ora_pool_sql_area, {$DSN},&quot;{$ORACLE.CONN.STR}&quot;]</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
